{% extends "print.html" %} {% block page %}
<div class="row">
  <div class="" id="vue">
    <page size="A4" id="pdfprint" v-for="page in pages">
      <table style="width: 100%">
        <tr v-for="row in page" style="height: 59.4mm">
          <td v-for="column in row" style="width: 105mm">
            <center>
              <lnbits-qrcode
                style="width: fit-content"
                :value="url + '?lightning=' + column"
                :options="{width: 150}"
              ></lnbits-qrcode>
            </center>
          </td>
        </tr>
      </table>
    </page>
  </div>
</div>
{% endblock %} {% block styles %}
<style>
  body {
    background: rgb(204, 204, 204);
  }
  page {
    background: white;
    display: block;
    margin: 0 auto;
    margin-bottom: 0.5cm;
    box-shadow: 0 0 0.5cm rgba(0, 0, 0, 0.5);
  }
  page[size='A4'] {
    width: 21cm;
    height: 29.7cm;
  }
  @media print {
    body,
    page {
      margin: 0px !important;
      box-shadow: none !important;
    }
    .q-page {
      padding: 0px !important;
    }
  }
</style>
{% endblock %} {% block scripts %}
<script>
  window.app = Vue.createApp({
    el: '#vue',
    data() {
      return {
        pages: [],
        columns: 3,
        rows: 4,
        url: window.location.origin,
        links: {{ links | tojson | safe }},
      }
    },
    methods: {
      preparePages() {
        let tempPage = []
        let tempRow = []
        this.links.forEach((link, index) => {
          tempRow.push(link)
          if ((index + 1) % this.columns === 0) {
            tempPage.push(tempRow)
            tempRow = []
          }
          if ((index + 1) % (this.columns * this.rows) === 0) {
            this.pages.push(tempPage)
            tempPage = []
          }
        })
        if (tempRow.length > 0) {
          tempPage.push(tempRow)
        }
        if (tempPage.length > 0) {
          this.pages.push(tempPage)
        }
      }
    },
    created() {
        this.preparePages()
    }
  })
</script>
{% endblock %}
